<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email template</title>

    <!-- cdn -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {

                },
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
          .full-with-gap {
            max-width: calc(100% - 80px);
          }
          .full-with-gap-md {
            max-width: calc(100% - 120px);
          }
          .full-with-gap-sm {
            max-width: calc(100% - 40px);
          }
          .grow-2 {
              flex-grow: 2;
          }
        }
      </style>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
    </style>
</head>

<body class="bg-[#efefef]">
    <div class="bg-[#efefef] flex justify-center">
        <div class="w-[1000px] sm:full-with-gap md:full-with-gap-md  max-w-full bg-white">
            <!-- header -->
            <div class="w-full h-[90px] bg-[#fef5e4] flex justify-center">
                <img src="https://tlr.stripocdn.email/content/guids/CABINET_5ebd51945adb862745b1a105fbb2c4f4/images/431502878865957.png"
                    alt="logo" class="h-full">
            </div>

            <!-- Descriptions -->
            <div class="mt-8 flex flex-col items-center">
                <h1 class="text-[30px] text-[#333333] px-[12px] py=[8px] text-center">Thanks for your order</h1>
                <p class="text-[14px] text-[#333333] mb-[20px] px-[24px] py-[18px] text-center">You'll receive an email
                    when
                    your items are shipped. If you have any questions, Call us 1-800-1234-5678.</p>
                <a href="#"
                    class="text-[16px] text-white block bg-[#d48344] block min-w-[164px] min-h-[40px] leading-[40px] text-center rounded-[6px] mb-[36px]">View
                    order status</a>
            </div>

            <!-- Bills -->
            <div class="flex justify-center mb-6">
                <div class="bg-[#fef9ef] w-[800px] full-with-gap-sm grid grid-cols-1 sm:grid-cols-2 sm:full-with-gap">
                    <div class="px-[20px] py-[24px] border-b-[16px] border-white sm:border-0">
                        <h1 class="text-base text-black font-medium mb-[12px]">SUMMARY:</h1>
                        <div>
                            <div class="grid grid-cols-2 text-sm">
                                <span class="block">Order #:</span>
                                <span id="order-id" class="block"></span>
                            </div>
                            <div class="grid grid-cols-2 text-sm">
                                <span class="block">Order Date:</span>
                                <span id="order-date" class="block"></span>
                            </div>
                            <div class="grid grid-cols-2 text-sm">
                                <span class="block">Order Total:</span>
                                <span id="order-total" class="block"></span>
                            </div>
                        </div>
                    </div>
                    <div class="px-[20px] py-[24px]">
                        <h1 class="text-[16px] text-[#000] font-medium mb-[12px]">SHIPPING ADDRESS:</h1>
                        <div class="text-sm">
                            <span id="order-address" class="block text-[#333]"></span>
                            <span id="order-district" class="block text-[#333]"></span>
                            <span id="order-city" class="block text-[#333]"></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- list items -->
            <div class="flex justify-center mb-3">
                <div class="w-[800px] full-with-gap">
                    <div class="flex flex-col">
                        <div class="grid sm:grid-cols-3 mb-2">
                            <h1 class="text-center px-2 py-1.5 text-black font-semibold text-base">ITEMS ORDERED</h1>
                            <span
                                class="hidden sm:block text-center px-2 py-1.5 text-[#333] text-sm font-normal">NAME</span>
                            <div class="hidden sm:grid grid-cols-12 text-[#333] text-sm font-normal text-center">
                                <span class="col-span-3 px-2 py-1.5">QTY</span>
                                <span class="col-span-8 px-2 py-1.5">PRICE</span>
                            </div>
                        </div>
                        <div class="w-full h-0.5 bg-[#efefef] self-center mb-2"></div>
                    </div>

                    <div id="list-items">
                        
                    </div>
                </div>
            </div>

            <!-- Total pay -->
            <div class="flex justify-center">
                <div class="grid grid-cols-2 sm:grid-cols-12 w-[800px] full-with-gap-sm mb-8">
                    <div class="sm:col-span-7 md:col-span-8 lg:col-span-9 sm:text-right">
                        <p class="px-4 py-px text-base sm:text-lg text-[#333]">Subtotal (<span id="number-total"></span> items):</p>
                        <p class="px-4 py-px text-base sm:text-lg text-[#333]">Flat-rate Shipping:</p>
                        <p class="px-4 py-px text-base sm:text-lg text-[#333]">Discount:</p>
                        <p class="px-4 py-px text-base sm:text-lg text-[#333] font-bold">Order Total:</p>
                    </div>
                    <div class="sm:col-span-5 sm:text-right sm:mr-5 md:mr-5 md:col-span-4 lg:col-span-3 lg:mr-0">
                        <p id="total-paid" class="px-4 py-px text-base sm:text-lg text-[#333]"></p>
                        <p id="ship-cost" class="px-4 py-px text-base sm:text-lg text-[#333] text-[#d48344] font-bold"></p>
                        <p id="discount" class="px-4 py-px text-base sm:text-lg text-[#333]"></p>
                        <p id="final-paid" class="px-4 py-px text-base sm:text-lg text-[#333] text-[#d48344] font-bold"></p>
                    </div>
                </div>
            </div>

            <!-- footer -->
            <div class="grid sm:grid-cols-12 bg-[#fef5e4] px-4 pt-5 pb-3">
                <div class="sm:col-span-4 sm:block px-4 flex flex-col items-center justify-center">
                    <div class="h-[50px] mb-2">
                        <img src="https://tlr.stripocdn.email/content/guids/CABINET_5ebd51945adb862745b1a105fbb2c4f4/images/431502878865957.png"
                            alt="logo" class="max-h-full mb-2">
                    </div>
                    <p class="mb-2 text-center sm:text-left">Po Box 3453 Colins St. Ceduna 4096 Australia</p>
                    <p class="mb-2">your@mail.com</p>
                </div>
                <div class="sm:col-span-8 px-4 flex flex-col">
                    <div class="h-[50px] flex justify-center items-center mb-2">
                        <h1 class="text-xl font-medium text">Information</h1>
                    </div>
                    <div class="">
                        <p class="mb-2 text-center sm:text-left">Vector graphics designed by Freepik. You are receiving
                            this email because
                            you have visited our site or asked us about regular newsletter</p>
                        <p class="text-center">@Candle in the wind</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- javascript -->
    <script>
        const $ = document.querySelector.bind(document)
        const orderApi = 'http://localhost:3000/orders'

        fetch(orderApi)
            .then(response => response.json())
            .then((order) => {
                $('#order-id').innerText = order.order_id
                $('#order-date').innerText = order.create_time
                const orderTotal = $('#order-total')
                orderTotal.innerText = order.total_cost_number + ' VND'
                $('#order-address').innerText = order.shipping_address.address
                $('#order-district').innerText = order.shipping_address.district
                $('#order-city').innerText = order.shipping_address.cities

                var numberTotal = 0
                var htmls = order.products.map((product) => {
                    numberTotal += product.quantity
                    return `
                        <div class="flex flex-col">
                            <div class="grid grid-cols-12 mb-2">
                                <div class="col-span-4 flex justify-center items-center">
                                    <img src=${product.image}
                                        alt="item" class="w-[80%] sm:w-[50%] md:w-[40%] max-h-full">
                                </div>
                                <div class="col-span-8 grid sm:grid-cols-2">
                                    <span class="text-left px-2 py-1.5">${product.name}</span>
                                    <div class="grid grid-cols-12 text-center">
                                        <span class="col-span-3 px-2 py-1.5">${product.quantity}</span>
                                        <span class="col-span-8 px-2 py-1.5">${product.price} VND</span>
                                    </div>
                                </div>
                            </div>
                            <div class="w-full h-0.5 bg-[#efefef] self-center mb-3"></div>
                        </div>
                    `
                })
                $('#list-items').innerHTML = htmls.join('')
                $('#number-total').innerText = numberTotal
                $('#total-paid').innerText = order.total_cost_number + ' VND'
                $('#ship-cost').innerText = order.shipping_cost > 0 ? order.shipping_cost + ' VND' : 'FREE'
                $('#discount').innerText = order.discount + ' VND'
                $('#final-paid').innerText = order.total_cost_number + order.shipping_cost - order.discount + ' VND'
            })

    </script>
</body>

</html>